# Перебираемые объекты

Чтобы объект был итерируемым, у него должно быть св-во [Symbol.iterator]

```js
const numbersArray = [4, 12, 8, 15, 2, 25];
console.log("[Symbol]: ", Symbol.iterator); // Symbol(Symbol.iterator)

console.log("Symbol.iterator in array", Symbol.iterator in numbersArray); // true

const symIter = Symbol.iterator;
console.log("symIter: ", symIter); // Symbol(Symbol.iterator)

const str = "123"[Symbol.iterator];
console.log("str: ", str); // [Symbol.iterator]() { [native code] }

console.log("Symbol.iterator in str", Symbol.iterator in str); // false

const obj = {
  name: "Mark",
  age: 30,
};

console.log("obj: ", obj[Symbol.iterator]); // undefined
console.log("Symbol.iterator in obj", Symbol.iterator in obj); // false
```

## Symbol.iterator

```js
const person = {
  name: "Mark",
  age: 30,
  gender: "male",
  interests: ["music", "fishing"],
};

// 1. вызов for..of сначала вызывает эту функцию
person[Symbol.iterator] = function () {
  // ...она возвращает объект итератора:
  // 2. Далее, for..of работает только с этим итератором,
  // запрашивая у него новые значения
  const properties = Object.keys(this);
  let count = 0;

  return {
    // 3. next() вызывается на каждой итерации цикла for..of

    next() {
      // 4. он должен вернуть значение в виде объекта {done:.., value :...}

      let result = { done: !(count < properties.length), value: person[properties[count++]] };

      return result;
    },
  };
};

// теперь работает!
for (let num of range) {
  console.log(num); // Mark, 30, male, [ 'music', 'fishing' ]
}
```

`Symbol.iterator` не влияет на `for..in`

```js
for (let key in person) {
  console.log("for..in", key); // name, age, gender, interests
}
```

## Usage

- Array.from(), [...arr], Map, Set, String

## Array.from

`Array.from(obj, cb, thisArg)` - примнимает obj и делает из него «настоящий» Array

- `obj` `итерируемый объект` или `псевдомассив`
- `cb` функция для обработки каждого элемента массива
- `thisArg` для привязки объекта в `this` callback функции

- `псевдомассивы` (или array-like objects) — это объекты, которые имеют свойство length и доступ к элементам по числовым индексам, но не обладают всеми методами массивов.
  - `arguments` функции
  - `NodeList` возврат из метода `querySelectorAll`
  - `HTMLCollection` возврат из метода `getElementsByClassName`

```js
let arrayLike = {
  0: "Hello",
  1: "World",
  length: 2,
};

for (let prop of arrayLike) {
  console.log("prop", prop); // arrayLike is not iterable
}

let arr = Array.from(arrayLike); // (*)
console.log(arr); // [ 'Hello', 'World' ]
for (let value of arr) {
  console.log(value); // Hello,World
}
```

если объект не итерируемый, или если нет св-ва `length` то будет пустой массив

```js
const person2 = {
  name: "Mark",
  age: 30,
  gender: "male",
  interests: ["music", "fishing"],
};

const arrPerson = Array.from(person2);
console.log("arrPerson: ", arrPerson); // []
```
